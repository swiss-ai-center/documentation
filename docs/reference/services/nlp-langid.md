# nlp-langid

- [:material-account-group: Main author - HEIA-FR](https://www.hes-so.ch/swiss-ai-center/equipe)
- [:material-git: Code](https://github.com/swiss-ai-center/nlp-langid-service)
- [:material-kubernetes: Deployment configuration](https://github.com/swiss-ai-center/nlp-langid-service/tree/main/model-serving/kubernetes)
- [:material-test-tube: Staging](https://langid-swiss-ai-center.kube-ext.isc.heia-fr.ch)
- [:material-factory: Production](https://langid-service.swiss-ai-center.ch)

## Description

!!! note

    More information about the service specification can be found in the
    [**Core concepts > Service**](../core-concepts/service.md) documentation.

The purpose of a language identification service (in short langid) is to detect
which language is present in a snippet of text. The detection usually works well
starting from a couple of phrases, so there is no need to input a whole 100
pages document to this service. If multiple languages are present in the input
text, then the detection will output the most present language. To be noted that
some languages are closer than other, e.g. the latin based languages.

The current langid model is here based on a naive bayes implementation
multiplying n-gram probabilities, and assuming equal a priori probabilities for
each languages. To simplify the implementation, n is here fixed for a given
model. n-grams are produced simply sliding a window of length n on the input
string. Tests have shown that 3-grams are providing satisfying results up to at
least 10 languages. Once the models are loaded, computation is quite fast,
basically O(1) for 1 n-gram as it is simple lookups in dictionaries to retrieve
the probabilities. The computation time is only proportional to the length of
the string and the number of languages in the model set, which is very much
reasonable.

The list of languages that can be identified are in dir src/trained_models and
currently includes en, de, es, fr, it, nl, pl, pt, ru, tr and dialect de-CH.

The API documentation is automatically generated by FastAPI using the OpenAPI
standard. A user friendly interface provided by Swagger is available under the
`/docs` route, where the endpoints of the service are described.

This simple service only has one route `/compute` that takes an image as input,
which will be analyzed.

## Environment variables

Check the
[**Core concepts > Service > Environment variables**](../core-concepts/service.md#environment-variables)
documentation for more details.

## Run the tests with Python

Check the
[**Core concepts > Service > Run the tests with Python**](../core-concepts/service.md#run-the-tests-with-python)
documentation for more details.

## Start the service locally

Check the
[**Core concepts > Service > Start the service locally**](../core-concepts/service.md#start-the-service-locally)
documentation for more details.
